---
import { mainNavigation } from "../../data/navigation";

const currentPath = Astro.url.pathname;
const baseUrl = import.meta.env.BASE_URL.replace(/\/$/, "");
---

<nav class="hidden lg:flex items-center gap-1" aria-label="Main navigation">
  {
    mainNavigation.map((item) => {
      const fullHref = item.href === "/" ? baseUrl : `${baseUrl}${item.href}`;
      const isActive =
        item.href === "/"
          ? currentPath === baseUrl || currentPath === "/"
          : currentPath.startsWith(item.href) || currentPath.startsWith(`${baseUrl}${item.href}`);
      return (
        <a
          href={fullHref}
          class:list={[
            "px-3 py-2 rounded-md text-sm font-medium transition-colors",
            isActive
              ? "text-tqcc-yellow bg-white/10"
              : "text-white/80 hover:text-tqcc-yellow hover:bg-white/5",
          ]}
          aria-current={isActive ? "page" : undefined}
        >
          {item.label}
        </a>
      );
    })
  }
</nav>
